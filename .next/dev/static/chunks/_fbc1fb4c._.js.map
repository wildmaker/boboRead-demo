{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/wildmaker/Documents/Projects/boboRead-demo/components/home-screen.tsx"],"sourcesContent":["\"use client\"\n\nimport Link from \"next/link\"\nimport { Settings } from \"lucide-react\"\n\nexport interface Book {\n  id: number\n  title: string\n  author?: string\n  image: string\n  date: string\n  status?: \"reading\" | \"new\" | \"completed\"\n  progress?: number\n  tape: \"yellow\" | \"cyan\" | \"pink\" | \"green\"\n}\n\ninterface HomeScreenProps {\n  isActive: boolean\n  onStartReading: () => void\n  onBookClick: (book: Book, cardRect: DOMRect) => void\n  bookCount: 1 | 7\n}\n\nexport function HomeScreen({ isActive, onStartReading, onBookClick, bookCount }: HomeScreenProps) {\n  const allBooks: Book[] = [\n    {\n      id: 1,\n      title: \"æ³•è€ç‹çš„å®è—\",\n      author: \"ç«¥è¯å”å”\",\n      image: \"/egyptian-pharaoh-treasure-ancient-egypt.jpg\",\n      date: \"æ˜¨å¤© 20:30\",\n      status: \"reading\" as const,\n      progress: 80,\n      tape: \"yellow\" as const,\n    },\n    {\n      id: 2,\n      title: \"æµ·åº•ä¸¤ä¸‡é‡Œ\",\n      author: \"å„’å‹’Â·å‡¡å°”çº³\",\n      image: \"/underwater-ocean-submarine-sea-adventure.jpg\",\n      date: \"åˆšåˆšæ·»åŠ \",\n      status: \"new\" as const,\n      tape: \"cyan\" as const,\n    },\n    {\n      id: 3,\n      title: \"é­”æ³•çº¢èˆé‹\",\n      author: \"ç³–æœå§å§\",\n      image: \"/magic-red-shoes-fairy-tale-ballet.jpg\",\n      date: \"3å¤©å‰è¯»è¿‡\",\n      status: \"completed\" as const,\n      tape: \"pink\" as const,\n    },\n    {\n      id: 4,\n      title: \"ç«æ˜Ÿå¤§æ•‘æ´\",\n      author: \"æ˜Ÿé™…å°é˜Ÿ\",\n      image: \"/mars-planet-space-rescue-mission.jpg\",\n      date: \"Oct 24\",\n      tape: \"green\" as const,\n    },\n    {\n      id: 5,\n      title: \"ç‹®å­ç‹è¾›å·´\",\n      author: \"è‰åŸæ•…äº‹ä¼š\",\n      image: \"/lion-king-simba-africa-savanna.jpg\",\n      date: \"Oct 20\",\n      status: \"reading\" as const,\n      tape: \"yellow\" as const,\n    },\n    {\n      id: 6,\n      title: \"æ™šå®‰æœˆäº®\",\n      author: \"ç¡å‰æ•…äº‹å±‹\",\n      image: \"/goodnight-moon-night-sky-bedtime.jpg\",\n      date: \"Sep 15\",\n      status: \"completed\" as const,\n      tape: \"pink\" as const,\n    },\n    {\n      id: 7,\n      title: \"å°ç‹å­\",\n      author: \"å®‰æ‰˜ä¸‡Â·å¾·Â·åœ£-åŸƒå…‹è‹ä½©é‡Œ\",\n      image: \"/little-prince-stars-planet-rose.jpg\",\n      date: \"Sep 10\",\n      status: \"reading\" as const,\n      tape: \"green\" as const,\n    },\n  ]\n\n  const books = bookCount === 1 ? [allBooks[0]] : allBooks\n\n  return (\n    <div className={`fixed inset-0 flex-col ${isActive ? \"flex\" : \"hidden\"}`}>\n      <div className=\"px-6 pt-[50px] pb-5 flex justify-between items-center bg-gradient-to-b from-[#FFFDF8] to-transparent relative z-10\">\n        <div>\n          <h1 className=\"text-[1.8rem] font-black text-[#FF8F00] mb-1 [text-shadow:2px_2px_0px_rgba(255,236,179,0.5)] font-fredoka\">\n            å›¾ä¹¦é¦†\n          </h1>\n          <p className=\"text-sm text-[#8D6E63] font-bold\">å·²æ”¶é›† {bookCount === 1 ? \"1\" : \"12\"} ä¸ªç²¾å½©æ•…äº‹</p>\n        </div>\n\n        <Link\n          href=\"/settings\"\n          className=\"px-2 py-1 rounded-full flex items-center justify-center text-[#5D4037] hover:bg-white/70 active:opacity-80 transition-colors\"\n          aria-label=\"è®¾ç½®\"\n        >\n          <Settings className=\"w-5 h-5\" />\n        </Link>\n      </div>\n\n      <div className=\"flex-1 overflow-y-auto px-6 pb-[130px] [scrollbar-width:none] [&::-webkit-scrollbar]:hidden relative z-[1]\">\n        <div\n          className={\n            bookCount === 1 ? \"flex justify-center items-start pt-6\" : \"grid grid-cols-2 gap-x-5 gap-y-10 items-start\"\n          }\n        >\n          {books.map((book, index) => (\n            <div\n              key={book.id}\n              data-book-id={book.id}\n              onClick={(event) => onBookClick(book, event.currentTarget.getBoundingClientRect())}\n              className={`\n                group polaroid-card relative bg-white rounded-[18px] p-2.5 pb-10\n                shadow-[0_2px_5px_rgba(141,110,99,0.05),_0_10px_30px_rgba(141,110,99,0.12)]\n                transition-all duration-300 cursor-pointer\n                [backface-visibility:hidden]\n                hover:!rotate-0 hover:scale-[1.03] hover:shadow-[0_15px_40px_rgba(141,110,99,0.2)] hover:z-10\n                active:scale-[0.96]\n                ${\n                  bookCount === 1\n                    ? \"w-[280px] scale-110\"\n                    : index % 2 === 0\n                      ? \"rotate-[-2deg] origin-top-left\"\n                      : \"rotate-[1.5deg] origin-top-right mt-10\"\n                }\n              `}\n            >\n              {/* Washi Tape */}\n              <div\n                className={`\n                  absolute top-[-12px] left-1/2 w-[50px] h-4\n                  opacity-85 mix-blend-multiply\n                  shadow-[0_2px_2px_rgba(0,0,0,0.1)]\n                  tape-mask\n                  ${\n                    book.tape === \"yellow\"\n                      ? \"bg-[#FFEB3B] -translate-x-1/2 rotate-[-2deg]\"\n                      : book.tape === \"cyan\"\n                        ? \"bg-[#4DD0E1] -translate-x-1/2 rotate-[3deg]\"\n                        : book.tape === \"pink\"\n                          ? \"bg-[#F48FB1] -translate-x-1/2 rotate-[-4deg]\"\n                          : \"bg-[#A5D6A7] -translate-x-1/2 rotate-[1deg]\"\n                  }\n                `}\n              />\n\n              {/* Image Container */}\n              <div className=\"relative w-full aspect-[1/1.05] bg-[#F5F5F5] rounded-xl overflow-hidden border border-black/[0.03] mb-8\">\n                <img\n                  src={book.image || \"/placeholder.svg\"}\n                  alt={book.title}\n                  className=\"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110\"\n                />\n                {/* Film grain overlay */}\n                <div className=\"absolute inset-0 opacity-30 pointer-events-none mix-blend-overlay film-grain\" />\n\n                {/* Status Pill Tag */}\n                {book.status && (\n                  <div className=\"absolute top-2 right-2 bg-white/95 px-2.5 py-1 rounded-xl text-[0.65rem] font-black text-[#4E342E] shadow-[0_2px_5px_rgba(0,0,0,0.1)] flex items-center gap-1\">\n                    {book.status === \"reading\" && (\n                      <>\n                        <div className=\"w-1.5 h-1.5 rounded-full bg-[#FF9100] shadow-[0_0_5px_#FF9100]\" />\n                        <span>é˜…è¯»ä¸­</span>\n                      </>\n                    )}\n                    {book.status === \"new\" && <span className=\"text-[#00C853]\">âœ¨ NEW</span>}\n                    {book.status === \"completed\" && (\n                      <>\n                        <div className=\"w-1.5 h-1.5 rounded-full bg-[#00E676]\" />\n                        <span>å®Œç»“</span>\n                      </>\n                    )}\n                  </div>\n                )}\n              </div>\n\n              {/* Handwritten Note */}\n              <div className=\"absolute bottom-2.5 left-0 w-full text-center px-2\">\n                <div className=\"font-nunito font-black text-[#4E342E] text-[0.9rem] mb-0.5 leading-tight\">\n                  {book.title}\n                </div>\n                <div className=\"font-fredoka text-[0.7rem] text-[#9E9E9E] tracking-wide\">{book.date}</div>\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n\n      <div className=\"fixed bottom-[30px] left-1/2 -translate-x-1/2 flex flex-col items-center z-[100]\">\n        {/* Button + Fox wrapper */}\n        <div className=\"relative mt-1 flex items-center\">\n          {/* Fennec Fox hiding behind the button */}\n          <img\n            src=\"/images/fox_01.png\"\n            alt=\"å°ç‹ç‹¸\"\n            className=\"pointer-events-none absolute -left-24 bottom-[-18px] w-[180px] h-auto object-contain z-0 drop-shadow-[0_10px_25px_rgba(0,0,0,0.3)]\"\n          />\n\n          {/* Pulse Ringï¼šæ­£å¥½åœ¨æŒ‰é’®æ­£ä¸‹æ–¹ï¼Œå°ºå¯¸ä¸æŒ‰é’®ä¸€è‡´ */}\n          <div className=\"pointer-events-none absolute inset-0 rounded-[50px] bg-[rgba(255,215,0,0.4)] z-[-2] animate-pulse-ring-gold\" />\n\n          {/* Main CTA Button */}\n          <button\n            onClick={onStartReading}\n            className=\"\n              relative overflow-hidden\n              bg-gradient-to-b from-[#FFD700] to-[#FFB300]\n              text-[#5D4037] font-fredoka text-xl font-bold\n              flex items-center justify-center gap-2\n              px-12 py-[18px] rounded-[50px]\n              border-4 border-white\n              shadow-[0_6px_0_#FF8F00,_0_20px_30px_rgba(255,143,0,0.25)]\n              min-w-[220px]\n              transition-all duration-100\n              active:translate-y-1 active:shadow-[0_2px_0_#FF8F00]\n              shine-effect\n              z-[1]\n            \"\n          >\n            <svg\n              className=\"w-7 h-7\"\n              viewBox=\"0 0 24 24\"\n              fill=\"none\"\n              xmlns=\"http://www.w3.org/2000/svg\"\n            >\n              <path\n                d=\"M4 9.5C4 8.39543 4.89543 7.5 6 7.5H8L9 6H15L16 7.5H18C19.1046 7.5 20 8.39543 20 9.5V17.5C20 18.6046 19.1046 19.5 18 19.5H6C4.89543 19.5 4 18.6046 4 17.5V9.5Z\"\n                stroke=\"currentColor\"\n                strokeWidth=\"1.5\"\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n              />\n              <circle\n                cx=\"12\"\n                cy=\"13.5\"\n                r=\"3\"\n                stroke=\"currentColor\"\n                strokeWidth=\"1.5\"\n              />\n              <circle cx=\"18\" cy=\"10\" r=\"0.8\" fill=\"currentColor\" />\n            </svg>\n            <span>æ·»åŠ æ–°ä¹¦</span>\n          </button>\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 399, "column": 0}, "map": {"version":3,"sources":["file:///Users/wildmaker/Documents/Projects/boboRead-demo/components/camera-screen.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport {\n  ChevronLeft,\n  Settings,\n  X,\n  Mic2,\n  Play,\n  Pause,\n  RotateCcw,\n} from \"lucide-react\"\n\ninterface CameraScreenProps {\n  isActive: boolean\n  onBack: () => void\n  onRead: () => void\n  onScanSuccess: () => void\n}\n\nexport function CameraScreen({ isActive, onBack, onRead, onScanSuccess }: CameraScreenProps) {\n  const [showDrawer, setShowDrawer] = useState(false)\n  const [showScanFrame, setShowScanFrame] = useState(true)\n  const [readingMode, setReadingMode] = useState(false)\n  const [isPlaying, setIsPlaying] = useState(false)\n  const [isListening, setIsListening] = useState(false)\n  const [currentPage, setCurrentPage] = useState(0)\n  const [showFoxGuide, setShowFoxGuide] = useState(false)\n  const [guideText, setGuideText] = useState(\"æŠŠå°é¢æ”¾è¿›æ¡†æ¡†é‡Œå“¦~\")\n  const [scanSuccess, setScanSuccess] = useState(false)\n  const [isFlashing, setIsFlashing] = useState(false)\n\n  const storyPages = [\n    {\n      text: \"åœ¨é‡‘å­—å¡”çš„æ·±å¤„ï¼Œ\",\n      highlight: \"æ¢é™©å®¶\",\n      after: \"å‘ç°äº†ä¸€ä¸ªç¥ç§˜çš„ç¬¦å·ï¼Œå®ƒé—ªçƒç€å…‰èŠ’...\",\n    },\n    {\n      text: \"è¿™æ˜¯ä¸€ä¸ª\",\n      highlight: \"å¤åŸƒåŠ\",\n      after: \"çš„è±¡å½¢æ–‡å­—ï¼Œä»£è¡¨ç€'ç”Ÿå‘½'ã€‚\",\n    },\n    {\n      text: \"æ¥ç€ï¼Œä»–ä»¬æ‰“å¼€äº†é‚£æ‰‡æ²‰é‡çš„å¤§é—¨ï¼Œçœ¼å‰å‡ºç°äº†ä¸€ç‰‡\",\n      highlight: \"é‡‘è‰²çš„æ²™æ¼ \",\n      after: \"ã€‚\",\n    },\n  ]\n\n  const triggerCapture = () => {\n    // é—ªå…‰è§†è§‰åé¦ˆ\n    setIsFlashing(true)\n    setTimeout(() => setIsFlashing(false), 300)\n\n    // å–æ™¯æ¡†é«˜äº®\n    setScanSuccess(true)\n\n    // è½»å¾®æŒ¯åŠ¨åé¦ˆ\n    if (typeof navigator !== \"undefined\" && \"vibrate\" in navigator) {\n      try {\n        navigator.vibrate(50)\n      } catch {\n        // ignore on unsupported devices\n      }\n    }\n\n    // ç‹ç‹¸æç¤ºæ–‡æ¡ˆ\n    setGuideText(\"æ‰¾åˆ°å•¦ï¼\")\n\n    // ç¨åé€šçŸ¥çˆ¶çº§ï¼šæ‰«ææˆåŠŸï¼Œå›åˆ°é¦–é¡µå¹¶å¼¹å‡ºæ–°ä¹¦å¡ç‰‡\n    setTimeout(() => {\n      onScanSuccess()\n    }, 700)\n  }\n\n  // Simulate book detection once è¿›å…¥æ‘„åƒå¤´ç•Œé¢\n  useEffect(() => {\n    if (isActive) {\n      // åˆå§‹åŒ–æ‰«æçŠ¶æ€\n      setReadingMode(false)\n      setShowDrawer(false)\n      setShowScanFrame(true)\n      setShowFoxGuide(false)\n      setGuideText(\"æŠŠå°é¢æ”¾è¿›æ¡†æ¡†é‡Œå“¦~\")\n      setScanSuccess(false)\n      setIsFlashing(false)\n\n      // ç‹ç‹¸ç¨åæ»‘å…¥\n      const guideTimer = setTimeout(() => {\n        setShowFoxGuide(true)\n      }, 600)\n\n      // æ¨¡æ‹Ÿè¯†åˆ«è¿‡ç¨‹\n      const scanTimer = setTimeout(() => {\n        triggerCapture()\n      }, 3200)\n\n      return () => {\n        clearTimeout(guideTimer)\n        clearTimeout(scanTimer)\n      }\n    }\n\n    // ç¦»å¼€æ‘„åƒå¤´ç•Œé¢æ—¶é‡ç½®çŠ¶æ€\n    setShowDrawer(false)\n    setShowScanFrame(true)\n    setReadingMode(false)\n    setCurrentPage(0)\n    setIsPlaying(false)\n    setIsListening(false)\n    setShowFoxGuide(false)\n    setIsFlashing(false)\n    setScanSuccess(false)\n  }, [isActive])\n\n  const startReading = () => {\n    // ç›´æ¥è¿›å…¥é˜…è¯»æ¨¡å¼\n    setShowDrawer(false)\n    setReadingMode(true)\n    setIsPlaying(true)\n    onRead()\n  }\n\n  const togglePlay = () => {\n    setIsPlaying(!isPlaying)\n  }\n\n  const toggleMic = () => {\n    setIsListening(!isListening)\n  }\n\n  const nextPage = () => {\n    setCurrentPage((prev) => (prev + 1) % storyPages.length)\n  }\n\n  const handleMascotClick = () => {\n    const mascot = document.querySelector(\".mascot-hippo\")\n    if (mascot) {\n      mascot.classList.add(\"scale-125\", \"rotate-12\")\n      setTimeout(() => {\n        mascot?.classList.remove(\"scale-125\", \"rotate-12\")\n      }, 300)\n    }\n  }\n\n  const currentStory = storyPages[currentPage]\n\n  return (\n    <div className={`fixed inset-0 ${isActive ? \"flex\" : \"hidden\"} flex-col`}>\n      {/* Layer 0: Camera Background with vignette */}\n      <div className=\"absolute inset-0 bg-[#111] z-0\">\n        <div\n          className=\"w-full h-full\"\n          style={{\n            backgroundImage: \"url(https://images.unsplash.com/photo-1544947950-fa07a98d237f?auto=format&fit=crop&q=80)\",\n            backgroundSize: \"cover\",\n            backgroundPosition: \"center\",\n          }}\n        />\n        <div\n          className=\"absolute inset-0\"\n          style={{\n            background: \"radial-gradient(circle, transparent 60%, rgba(0,0,0,0.3) 100%)\",\n          }}\n        />\n      </div>\n\n      {/* Flash overlay */}\n      {isFlashing && (\n        <div className=\"absolute inset-0 bg-white z-40 pointer-events-none animate-flash\" />\n      )}\n\n      {/* Layer 1: HUD - Scan Frame + focus mask */}\n      {showScanFrame && (\n        <div\n          className=\"absolute inset-0 z-10 flex items-center justify-center pointer-events-none\"\n          style={{ transform: \"translateY(-8%)\" }}\n        >\n          <div\n            className={`relative w-[80vw] max-w-[340px] aspect-[3/4] rounded-[24px] border-2 border-dashed border-white/60 scan-focus-mask ${\n              scanSuccess ? \"scan-focus-mask-success\" : \"\"\n            }`}\n          >\n            {/* Scanning laser line */}\n            {!scanSuccess && <div className=\"absolute top-0 left-0 w-full h-[2px] scan-line animate-scan\" />}\n          </div>\n        </div>\n      )}\n\n      {/* Top Navigation for scanning */}\n      {!readingMode && (\n        <div\n          className=\"absolute top-0 left-0 w-full flex justify-between items-center z-20 pointer-events-auto\"\n          style={{ padding: \"calc(env(safe-area-inset-top, 20px) + 10px) 20px\" }}\n        >\n          <button\n            onClick={onBack}\n            className=\"w-10 h-10 bg-black/40 backdrop-blur-[8px] rounded-full flex items-center justify-center text-white border border-white/30\"\n            aria-label=\"è¿”å›\"\n          >\n            <X className=\"w-5 h-5\" />\n          </button>\n          <div className=\"text-white text-[0.95rem] font-bold [text-shadow:0_2px_4px_rgba(0,0,0,0.5)]\">\n            æ·»åŠ æ–°ä¹¦\n          </div>\n          <div style={{ width: 40 }} />\n        </div>\n      )}\n\n      {/* ç‹ç‹¸å¼•å¯¼æ°”æ³¡ */}\n      {!readingMode && (\n        <div\n          className={`absolute bottom-[110px] right-0 z-30 flex flex-col items-end transition-transform duration-500 ease-out ${\n            showFoxGuide ? \"translate-x-0\" : \"translate-x-full\"\n          }`}\n        >\n          <div className=\"bg-white px-3.5 py-2.5 rounded-[20px_20px_0_20px] shadow-[0_5px_15px_rgba(0,0,0,0.25)] mr-5 mb-[-8px] text-[0.8rem] font-bold text-[color:var(--text-dark)] max-w-[220px]\">\n            {guideText}\n          </div>\n          <div className=\"text-[3.2rem] drop-shadow-[-5px_6px_12px_rgba(0,0,0,0.35)] mr-2\">\n            ğŸ¦Š\n          </div>\n        </div>\n      )}\n\n      {/* Layer 2: Top Navigation (Glass buttons) for reading mode */}\n      {readingMode && (\n        <div\n          className=\"absolute top-0 left-0 w-full flex justify-between z-20 pointer-events-auto\"\n          style={{ padding: \"calc(env(safe-area-inset-top, 20px) + 10px) 20px\" }}\n        >\n          <button\n            onClick={onBack}\n            className=\"w-11 h-11 bg-black/20 backdrop-blur-[10px] border border-white/20 rounded-full flex items-center justify-center text-white\"\n          >\n            <ChevronLeft className=\"w-6 h-6\" strokeWidth={3} />\n          </button>\n          <button className=\"w-11 h-11 bg-black/20 backdrop-blur-[10px] border border-white/20 rounded-full flex items-center justify-center text-white\">\n            <Settings className=\"w-5 h-5\" />\n          </button>\n        </div>\n      )}\n\n      {/* Book Detail Drawer */}\n      <div\n        className={`absolute bottom-0 left-0 w-full bg-white rounded-t-[30px] px-6 pt-[30px] pb-10 shadow-[0_-10px_40px_rgba(0,0,0,0.3)] z-[100] transition-transform duration-[400ms] ${\n          showDrawer ? \"translate-y-0\" : \"translate-y-full\"\n        }`}\n        style={{ transitionTimingFunction: \"cubic-bezier(0.175, 0.885, 0.32, 1.275)\" }}\n      >\n        {/* Drawer Handle */}\n        <div className=\"w-10 h-[5px] bg-border rounded-full mx-auto mb-5\" />\n\n        {/* Book Detail Header */}\n        <div className=\"flex gap-5 items-start mb-5\">\n          {/* Detail Cover */}\n          <div className=\"w-[100px] h-[130px] bg-egypt-blue rounded-xl flex items-center justify-center text-[3rem] shadow-[0_5px_15px_rgba(0,0,0,0.2)]\">\n            ğŸ¦–\n          </div>\n\n          {/* Detail Info */}\n          <div className=\"flex-1\">\n            <h2 className=\"text-egypt-blue text-2xl font-black mb-2\">æ³•è€ç‹çš„å®è—</h2>\n            <div className=\"flex gap-1 flex-wrap mb-4\">\n              <span className=\"bg-desert-gold text-[#8d6e63] px-2.5 py-1 rounded-[10px] text-xs font-bold\">æ¢é™©</span>\n              <span className=\"bg-desert-gold text-[#8d6e63] px-2.5 py-1 rounded-[10px] text-xs font-bold\">å†å²</span>\n              <span className=\"bg-desert-gold text-[#8d6e63] px-2.5 py-1 rounded-[10px] text-xs font-bold\">3-6å²</span>\n            </div>\n            <p className=\"text-muted-foreground text-sm m-0\">åœ¨ç¥ç§˜çš„é‡‘å­—å¡”ä¸­ï¼Œå¯»æ‰¾å¤±è½çš„é»„é‡‘æƒæ–...</p>\n          </div>\n        </div>\n\n        {/* Start Reading Button */}\n        <button\n          onClick={startReading}\n          className=\"w-full py-4 bg-royal-gold text-egypt-blue rounded-[25px] font-black text-lg shadow-[0_5px_0_var(--dark-gold)] active:translate-y-1 active:shadow-none transition-all border-none\"\n        >\n          <span className=\"inline-flex items-center gap-2\">\n            <span>å¼€å§‹ä¼´è¯»</span>\n            <Play className=\"w-5 h-5\" />\n          </span>\n        </button>\n      </div>\n\n      {/* Layer 3: Reading Control Panel */}\n      {readingMode && (\n        <div\n          className=\"absolute bottom-0 left-0 w-full z-[100] pointer-events-none\"\n          style={{ paddingBottom: \"env(safe-area-inset-bottom, 20px)\" }}\n        >\n          <div className=\"px-5 pb-5 pointer-events-auto relative\">\n            <div\n              className=\"mascot-hippo absolute w-[140px] h-[140px] flex items-center justify-center text-[5rem] cursor-pointer transition-all duration-300 z-30\"\n              style={{\n                top: \"-75px\",\n                left: \"-10px\",\n                filter: \"drop-shadow(0 10px 15px rgba(0,0,0,0.2))\",\n                transformOrigin: \"bottom center\",\n              }}\n              onClick={handleMascotClick}\n            >\n              <div className=\"animate-hippo-float\">ğŸ¦›</div>\n            </div>\n\n            <div\n              className=\"relative rounded-[32px] border-2 border-white/60 overflow-visible\"\n              style={{\n                background: \"rgba(255, 253, 245, 0.92)\",\n                backdropFilter: \"blur(20px)\",\n                WebkitBackdropFilter: \"blur(20px)\",\n                padding: \"24px 24px 20px\",\n                boxShadow: \"0 20px 40px rgba(0,0,0,0.2)\",\n              }}\n            >\n              <div className=\"mb-6 min-h-[80px] flex items-center pl-2.5\">\n                <p\n                  className=\"font-fredoka text-[1.15rem] leading-relaxed text-text-dark text-left m-0\"\n                  style={{ textIndent: \"2.5rem\" }}\n                >\n                  {currentStory.text}\n                  <span className=\"inline-block bg-[#FFC107]/25 text-[#E65100] px-1.5 py-0.5 rounded-md font-semibold border-b-2 border-[#FFC107] mx-1\">\n                    {currentStory.highlight}\n                  </span>\n                  {currentStory.after}\n                </p>\n              </div>\n\n              <div className=\"grid grid-cols-[1fr_auto_1fr] items-center gap-2.5\">\n                {/* Left Controls */}\n                <div className=\"flex gap-4\">\n                  <button\n                    onClick={toggleMic}\n                    className={`relative w-14 h-14 rounded-full border-none flex items-center justify-center text-[1.4rem] text-white transition-all duration-100 ${\n                      isListening\n                        ? \"bg-[#FF5252] border-[3px] border-[#FFEBEE] animate-pulse-ring\"\n                        : \"bg-[#26C6DA] border-[3px] border-white\"\n                    }`}\n                    style={{\n                      backgroundImage: \"linear-gradient(180deg, rgba(255,255,255,0.2) 0%, rgba(0,0,0,0.05) 100%)\",\n                      boxShadow: isListening\n                        ? \"0 6px 0 #D32F2F\"\n                        : \"0 6px 0 #0097A7, 0 10px 15px rgba(0, 151, 167, 0.2)\",\n                    }}\n                    onMouseDown={(e) => {\n                      e.currentTarget.style.transform = \"translateY(4px) scale(0.95)\"\n                      e.currentTarget.style.boxShadow = \"none\"\n                    }}\n                    onMouseUp={(e) => {\n                      e.currentTarget.style.transform = \"\"\n                      e.currentTarget.style.boxShadow = isListening\n                        ? \"0 6px 0 #D32F2F\"\n                        : \"0 6px 0 #0097A7, 0 10px 15px rgba(0, 151, 167, 0.2)\"\n                    }}\n                    onMouseLeave={(e) => {\n                      e.currentTarget.style.transform = \"\"\n                      e.currentTarget.style.boxShadow = isListening\n                        ? \"0 6px 0 #D32F2F\"\n                        : \"0 6px 0 #0097A7, 0 10px 15px rgba(0, 151, 167, 0.2)\"\n                    }}\n                  >\n                    <Mic2 className=\"w-6 h-6\" />\n                  </button>\n                </div>\n\n                {/* Center - Primary Play Button */}\n                <button\n                  onClick={togglePlay}\n                  className=\"relative w-[76px] h-[76px] rounded-full border-[3px] border-white flex items-center justify-center text-[2rem] text-[#5D4037] bg-[#FFC107] transition-all duration-100 z-[5]\"\n                  style={{\n                    backgroundImage: \"linear-gradient(180deg, rgba(255,255,255,0.2) 0%, rgba(0,0,0,0.05) 100%)\",\n                    boxShadow: \"0 8px 0 #FF8F00, 0 16px 20px rgba(255, 143, 0, 0.3)\",\n                  }}\n                  onMouseDown={(e) => {\n                    e.currentTarget.style.transform = \"translateY(4px) scale(0.95)\"\n                    e.currentTarget.style.boxShadow = \"none\"\n                  }}\n                  onMouseUp={(e) => {\n                    e.currentTarget.style.transform = \"\"\n                    e.currentTarget.style.boxShadow = \"0 8px 0 #FF8F00, 0 16px 20px rgba(255, 143, 0, 0.3)\"\n                  }}\n                  onMouseLeave={(e) => {\n                    e.currentTarget.style.transform = \"\"\n                    e.currentTarget.style.boxShadow = \"0 8px 0 #FF8F00, 0 16px 20px rgba(255, 143, 0, 0.3)\"\n                  }}\n                >\n                {isPlaying ? <Pause className=\"w-7 h-7\" /> : <Play className=\"w-7 h-7\" />}\n                </button>\n\n                {/* Right Controls */}\n                <div className=\"flex gap-4 justify-end\">\n                  <button\n                    onClick={() => {\n                      setCurrentPage(0)\n                      setIsPlaying(true)\n                    }}\n                    className=\"relative w-14 h-14 rounded-full border-[3px] border-white flex items-center justify-center text-[1.4rem] text-white bg-[#FF7043] transition-all duration-100\"\n                    style={{\n                      backgroundImage: \"linear-gradient(180deg, rgba(255,255,255,0.2) 0%, rgba(0,0,0,0.05) 100%)\",\n                      boxShadow: \"0 6px 0 #D84315, 0 10px 15px rgba(216, 67, 21, 0.2)\",\n                    }}\n                    onMouseDown={(e) => {\n                      e.currentTarget.style.transform = \"translateY(4px) scale(0.95)\"\n                      e.currentTarget.style.boxShadow = \"none\"\n                    }}\n                    onMouseUp={(e) => {\n                      e.currentTarget.style.transform = \"\"\n                      e.currentTarget.style.boxShadow = \"0 6px 0 #D84315, 0 10px 15px rgba(216, 67, 21, 0.2)\"\n                    }}\n                    onMouseLeave={(e) => {\n                      e.currentTarget.style.transform = \"\"\n                      e.currentTarget.style.boxShadow = \"0 6px 0 #D84315, 0 10px 15px rgba(216, 67, 21, 0.2)\"\n                    }}\n                  >\n                  <RotateCcw className=\"w-6 h-6\" />\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1069, "column": 0}, "map": {"version":3,"sources":["file:///Users/wildmaker/Documents/Projects/boboRead-demo/components/onboarding-guide.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState } from \"react\"\nimport { Check, Eye, Rocket } from \"lucide-react\"\n\ninterface OnboardingGuideProps {\n  onComplete: () => void\n}\n\nexport function OnboardingGuide({ onComplete }: OnboardingGuideProps) {\n  const [currentStep, setCurrentStep] = useState(1)\n  const [isVisible, setIsVisible] = useState(true)\n\n  const nextStep = (stepNum: number) => {\n    setCurrentStep(stepNum)\n  }\n\n  const finishGuide = () => {\n    setIsVisible(false)\n    setTimeout(() => {\n      localStorage.setItem(\"hasSeenOnboarding\", \"true\")\n      onComplete()\n    }, 500)\n  }\n\n  return (\n    <div\n      className={`fixed inset-0 z-[200] transition-opacity duration-500 ${isVisible ? \"opacity-100\" : \"opacity-0 pointer-events-none\"}`}\n    >\n      {/* Overlay with blur */}\n      <div className=\"absolute inset-0 bg-black/60 backdrop-blur-sm\" />\n\n      {/* Guide Mascot - Fox */}\n      <div\n        className={`absolute font-emoji text-[6rem] z-[202] transition-all duration-500 ${\n          currentStep === 2\n            ? \"top-[10%] left-[15%] scale-[0.6]\"\n            : \"bottom-[320px] left-1/2 -translate-x-1/2 animate-float\"\n        }`}\n        style={{ filter: \"drop-shadow(0 10px 10px rgba(0,0,0,0.3))\" }}\n      >\n        ğŸ¦Š\n      </div>\n\n      {/* AR Scan Helper (only show in step 2) */}\n      {currentStep === 2 && (\n        <div\n          className=\"absolute top-[20%] left-[10%] w-[80%] h-[40%] border-4 border-dashed rounded-[20px] pointer-events-none z-[90] animate-pulse-border\"\n          style={{ borderColor: \"rgba(255,255,255,0.8)\" }}\n        />\n      )}\n\n      {/* Guide Card Container */}\n      <div className=\"absolute bottom-0 left-0 w-full bg-white rounded-t-[32px] px-[30px] pt-10 pb-10 text-center z-[201] animate-slide-up\">\n        {/* Step 1: Place Phone */}\n        <div className={`${currentStep === 1 ? \"block\" : \"hidden\"} animate-fade-in`}>\n          <div className=\"h-[120px] flex items-center justify-center mb-5\">\n            <div className=\"relative w-[100px] h-[80px]\">\n              {/* Mug */}\n              <div className=\"absolute bottom-0 right-[10px] w-10 h-[50px] bg-turquoise rounded-t-[5px] rounded-b-[15px]\" />\n              {/* Phone */}\n              <div className=\"absolute bottom-0 left-5 w-[35px] h-[70px] bg-[#333] rounded-[5px] border-2 border-white animate-lean-phone\" />\n            </div>\n          </div>\n          <h3 className=\"font-fredoka text-[1.4rem] text-[#FF6D00] mb-2.5\">è§£æ”¾åŒæ‰‹</h3>\n          <p className=\"text-text-dark text-base leading-[1.5] mb-[30px]\">\n            æ‰¾ä¸ªæ°´æ¯æˆ–æ”¯æ¶ï¼ŒæŠŠæ‰‹æœº\n            <br />\n            <b>æ–œé åœ¨ä¸Šé¢</b>ï¼Œå¯¹å‡†æ¡Œé¢å“¦~\n          </p>\n          <button\n            onClick={() => nextStep(2)}\n            className=\"w-full py-4 border-none rounded-[50px] font-fredoka text-[1.1rem] font-bold bg-[#FFC107] text-[#5D4037] cursor-pointer transition-transform duration-100 active:translate-y-1\"\n            style={{\n              boxShadow: \"0 6px 0 #FF8F00, 0 10px 20px rgba(0,0,0,0.1)\",\n            }}\n            onMouseDown={(e) => {\n              e.currentTarget.style.boxShadow = \"0 2px 0 #FF8F00\"\n            }}\n            onMouseUp={(e) => {\n              e.currentTarget.style.boxShadow = \"0 6px 0 #FF8F00, 0 10px 20px rgba(0,0,0,0.1)\"\n            }}\n            onMouseLeave={(e) => {\n              e.currentTarget.style.boxShadow = \"0 6px 0 #FF8F00, 0 10px 20px rgba(0,0,0,0.1)\"\n            }}\n          >\n            <span className=\"inline-flex items-center gap-2 justify-center\">\n              <span>æ”¾å¥½å•¦</span>\n              <Check className=\"w-5 h-5\" />\n            </span>\n          </button>\n        </div>\n\n        {/* Step 2: Place Book */}\n        <div className={`${currentStep === 2 ? \"block\" : \"hidden\"} animate-fade-in`}>\n          <div className=\"h-[120px] flex items-center justify-center mb-5 text-[3rem]\">ğŸ“– â¡ï¸ ğŸ“±</div>\n          <h3 className=\"font-fredoka text-[1.4rem] text-[#FF6D00] mb-2.5\">æ”¾å…¥ç»˜æœ¬</h3>\n          <p className=\"text-text-dark text-base leading-[1.5] mb-[30px]\">\n            æŠŠç»˜æœ¬æ”¾åœ¨è™šçº¿æ¡†é‡Œ\n            <br />\n            è®©æˆ‘çœ‹æ¸…æ¥šå°é¢\n          </p>\n          <button\n            onClick={() => nextStep(3)}\n            className=\"w-full py-4 border-none rounded-[50px] font-fredoka text-[1.1rem] font-bold bg-[#FFC107] text-[#5D4037] cursor-pointer transition-transform duration-100 active:translate-y-1\"\n            style={{\n              boxShadow: \"0 6px 0 #FF8F00, 0 10px 20px rgba(0,0,0,0.1)\",\n            }}\n            onMouseDown={(e) => {\n              e.currentTarget.style.boxShadow = \"0 2px 0 #FF8F00\"\n            }}\n            onMouseUp={(e) => {\n              e.currentTarget.style.boxShadow = \"0 6px 0 #FF8F00, 0 10px 20px rgba(0,0,0,0.1)\"\n            }}\n            onMouseLeave={(e) => {\n              e.currentTarget.style.boxShadow = \"0 6px 0 #FF8F00, 0 10px 20px rgba(0,0,0,0.1)\"\n            }}\n          >\n            <span className=\"inline-flex items-center gap-2 justify-center\">\n              <span>çœ‹æ¸…äº†</span>\n              <Eye className=\"w-5 h-5\" />\n            </span>\n          </button>\n        </div>\n\n        {/* Step 3: Flip Page */}\n        <div className={`${currentStep === 3 ? \"block\" : \"hidden\"} animate-fade-in`}>\n          <div className=\"h-[120px] flex items-center justify-center mb-5\">\n            <div className=\"relative w-20 h-[60px] bg-[#EEE] rounded-[5px]\">\n              <div\n                className=\"absolute top-0 right-0 w-1/2 h-full bg-white rounded-r-[5px] border border-[#ddd] animate-turn-page\"\n                style={{ transformOrigin: \"left center\" }}\n              />\n            </div>\n          </div>\n          <h3 className=\"font-fredoka text-[1.4rem] text-[#FF6D00] mb-2.5\">ç¿»é¡µå³è¯»</h3>\n          <p className=\"text-text-dark text-base leading-[1.5] mb-[30px]\">\n            åªè¦<b>ç¿»ä¸€é¡µ</b>ä¹¦\n            <br />\n            æˆ‘å°±èƒ½è‡ªåŠ¨ç»™ä½ è®²æ•…äº‹å•¦ï¼\n          </p>\n          <button\n            onClick={finishGuide}\n            className=\"w-full py-4 border-none rounded-[50px] font-fredoka text-[1.1rem] font-bold bg-[#FFC107] text-[#5D4037] cursor-pointer transition-transform duration-100 active:translate-y-1\"\n            style={{\n              boxShadow: \"0 6px 0 #FF8F00, 0 10px 20px rgba(0,0,0,0.1)\",\n            }}\n            onMouseDown={(e) => {\n              e.currentTarget.style.boxShadow = \"0 2px 0 #FF8F00\"\n            }}\n            onMouseUp={(e) => {\n              e.currentTarget.style.boxShadow = \"0 6px 0 #FF8F00, 0 10px 20px rgba(0,0,0,0.1)\"\n            }}\n            onMouseLeave={(e) => {\n              e.currentTarget.style.boxShadow = \"0 6px 0 #FF8F00, 0 10px 20px rgba(0,0,0,0.1)\"\n            }}\n          >\n            <span className=\"inline-flex items-center gap-2 justify-center\">\n              <span>å¼€å§‹ä½“éªŒ</span>\n              <Rocket className=\"w-5 h-5\" />\n            </span>\n          </button>\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1460, "column": 0}, "map": {"version":3,"sources":["file:///Users/wildmaker/Documents/Projects/boboRead-demo/components/ftux-intro.tsx"],"sourcesContent":["\"use client\"\n\nimport { useRef, useState, UIEvent } from \"react\"\nimport { Hand, Sparkles, Rocket } from \"lucide-react\"\n\ninterface FtuxIntroProps {\n  onFinish: () => void\n}\n\nconst SLIDE_COUNT = 3\n\nexport function FtuxIntro({ onFinish }: FtuxIntroProps) {\n  const carouselRef = useRef<HTMLDivElement | null>(null)\n  const [currentIndex, setCurrentIndex] = useState(0)\n\n  const handleScroll = (event: UIEvent<HTMLDivElement>) => {\n    const container = event.currentTarget\n    const width = container.offsetWidth || 1\n    const newIndex = Math.round(container.scrollLeft / width)\n\n    if (newIndex !== currentIndex) {\n      setCurrentIndex(newIndex)\n    }\n  }\n\n  const updateAndMaybeFinish = () => {\n    if (currentIndex < SLIDE_COUNT - 1) {\n      const container = carouselRef.current\n      if (container) {\n        container.scrollBy({ left: container.offsetWidth, behavior: \"smooth\" })\n      }\n    } else {\n      finish()\n    }\n  }\n\n  const finish = () => {\n    try {\n      if (typeof window !== \"undefined\") {\n        localStorage.setItem(\"hasSeenFtux\", \"true\")\n      }\n    } catch {\n      // ignore storage errors (private mode, etc.)\n    }\n    onFinish()\n  }\n\n  const buttonLabel =\n    currentIndex === 0 ? \"ä½ å¥½å‘€ï¼\" : currentIndex === 1 ? \"å¥½ç¥å¥‡\" : \"å¼€å§‹æ‰«æ\"\n\n  const buttonIcon =\n    currentIndex === 0 ? (\n      <Hand className=\"w-5 h-5\" />\n    ) : currentIndex === 1 ? (\n      <Sparkles className=\"w-5 h-5\" />\n    ) : (\n      <Rocket className=\"w-5 h-5\" />\n    )\n\n  return (\n    <div className=\"fixed inset-0 z-[250] flex flex-col ftux-root\">\n      {/* è·³è¿‡æŒ‰é’® */}\n      <button type=\"button\" className=\"ftux-skip-btn\" onClick={finish}>\n        è·³è¿‡\n      </button>\n\n      {/* è½®æ’­ä¸»åŒºåŸŸ */}\n      <div\n        ref={carouselRef}\n        className=\"ftux-carousel\"\n        onScroll={handleScroll}\n      >\n        {/* PAGE 1 */}\n        <div className={`ftux-slide ${currentIndex === 0 ? \"active\" : \"\"}`} id=\"ftux-slide-0\">\n          <div className=\"ftux-voice-bubble\">\n            <div className=\"ftux-speaker-icon\">ğŸ”Š</div>\n            <div className=\"ftux-wave-box\">\n              <div className=\"ftux-bar\" />\n              <div className=\"ftux-bar\" />\n              <div className=\"ftux-bar\" />\n              <div className=\"ftux-bar\" />\n              <div className=\"ftux-bar\" />\n            </div>\n            <span className=\"ftux-bubble-text\">æˆ‘åœ¨è¯´è¯å“¦~</span>\n          </div>\n\n          <div className=\"ftux-mascot-area\">\n            <div className=\"ftux-fox-pose\">\n              <video\n                className=\"ftux-fox-video\"\n                src=\"/videos/ftux-greeting.mp4\"\n                autoPlay\n                loop\n                muted\n                playsInline\n              />\n            </div>\n          </div>\n\n          <div className=\"ftux-text-area\">\n            <div className=\"ftux-title\">å—¨ï¼æˆ‘æ˜¯å°å®</div>\n            <div className=\"ftux-desc\">\n              ç»ˆäºè§åˆ°ä½ å•¦ï¼\n              <br />\n              æˆ‘æ˜¯ä¸€ä¸ªä¼šè®²æ•…äº‹çš„å°ç‹ç‹¸ï¼Œ\n              <br />\n              ç‰¹åˆ«æƒ³å’Œä½ åšæœ‹å‹ã€‚\n            </div>\n          </div>\n        </div>\n\n        {/* PAGE 2 */}\n        <div\n          className={`ftux-slide ftux-slide-step2 ${currentIndex === 1 ? \"active\" : \"\"}`}\n          id=\"ftux-slide-1\"\n        >\n          <div className=\"ftux-voice-bubble\">\n            <div className=\"ftux-wave-box\">\n              <div className=\"ftux-bar\" />\n              <div className=\"ftux-bar\" />\n              <div className=\"ftux-bar\" />\n              <div className=\"ftux-bar\" />\n              <div className=\"ftux-bar\" />\n            </div>\n          </div>\n\n          <div className=\"ftux-mascot-area\">\n            <div className=\"ftux-fox-pose\">\n              <video\n                className=\"ftux-fox-video ftux-fox-video-step2\"\n                src=\"/videos/ftux-step2.mp4\"\n                autoPlay\n                loop\n                muted\n                playsInline\n              />\n            </div>\n          </div>\n\n          <div className=\"ftux-text-area\">\n            <div className=\"ftux-title\">æˆ‘æœ‰ç¥å¥‡çš„çœ¼ç›</div>\n            <div className=\"ftux-desc\">\n              æŠŠä½ å–œæ¬¢çš„ç»˜æœ¬æ‹¿ç»™æˆ‘çœ‹çœ‹ã€‚\n              <br />\n              åªè¦â€œå’”åš“â€ä¸€ä¸‹ï¼Œ\n              <br />\n              æˆ‘å°±èƒ½è®¤å‡ºå®ƒæ˜¯è°å“¦ï¼\n            </div>\n          </div>\n        </div>\n\n        {/* PAGE 3 */}\n        <div className={`ftux-slide ${currentIndex === 2 ? \"active\" : \"\"}`} id=\"ftux-slide-2\">\n          <div className=\"ftux-voice-bubble\">\n            <div className=\"ftux-wave-box\">\n              <div className=\"ftux-bar\" />\n              <div className=\"ftux-bar\" />\n              <div className=\"ftux-bar\" />\n              <div className=\"ftux-bar\" />\n              <div className=\"ftux-bar\" />\n            </div>\n          </div>\n\n          <div className=\"ftux-mascot-area\">\n            <div className=\"ftux-fox-pose\">ğŸ§ğŸ¦Š</div>\n          </div>\n\n          <div className=\"ftux-text-area\">\n            <div className=\"ftux-title\">æˆ‘ä¸æ€•ç”Ÿå­—</div>\n            <div className=\"ftux-desc\">\n              ä¸ç®¡ä¹¦ä¸Šæœ‰å¤šå°‘å­—ï¼Œ\n              <br />\n              æˆ‘éƒ½èƒ½æŠŠå®ƒä»¬å˜æˆæœ‰è¶£çš„å£°éŸ³ã€‚\n              <br />\n              æˆ‘ä»¬ä¸€èµ·å¬æ•…äº‹å§ï¼\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* åº•éƒ¨æ§åˆ¶åŒº */}\n      <div className=\"ftux-bottom\">\n        <div className=\"ftux-dots\">\n          {Array.from({ length: SLIDE_COUNT }).map((_, index) => (\n            <div\n              key={index}\n              className={`ftux-dot ${currentIndex === index ? \"active\" : \"\"}`}\n            />\n          ))}\n        </div>\n\n        <button type=\"button\" className=\"ftux-btn\" onClick={updateAndMaybeFinish}>\n          <span className=\"inline-flex items-center gap-2\">\n            {buttonIcon}\n            <span>{buttonLabel}</span>\n          </span>\n        </button>\n      </div>\n    </div>\n  )\n}\n\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2008, "column": 0}, "map": {"version":3,"sources":["file:///Users/wildmaker/Documents/Projects/boboRead-demo/components/book-detail-modal.tsx"],"sourcesContent":["\"use client\"\n\nimport { X } from \"lucide-react\"\nimport { useRef, useState } from \"react\"\nimport type { Book } from \"@/components/home-screen\"\n\nexport interface CardRect {\n  top: number\n  left: number\n  width: number\n  height: number\n}\n\ninterface BookDetailModalProps {\n  book: Book | null\n  isOpen: boolean\n  onClose: () => void\n  onStartReading?: (book: Book) => void\n  targetRect?: CardRect | null\n}\n\nexport function BookDetailModal({ book, isOpen, onClose, onStartReading, targetRect }: BookDetailModalProps) {\n  const [isClosing, setIsClosing] = useState(false)\n  const cardRef = useRef<HTMLDivElement>(null)\n\n  if (!book || !isOpen) return null\n\n  const playReturnAnimation = () => {\n    if (!targetRect || !cardRef.current) return false\n    const cardRect = cardRef.current.getBoundingClientRect()\n    const deltaX = targetRect.left - cardRect.left\n    const deltaY = targetRect.top - cardRect.top\n    const scaleX = targetRect.width / cardRect.width\n    const scaleY = targetRect.height / cardRect.height\n\n    cardRef.current.animate(\n      [\n        { transform: \"translate3d(0,0,0) scale(1)\", opacity: 1 },\n        {\n          transform: `translate3d(${deltaX}px, ${deltaY}px, 0) scale(${scaleX}, ${scaleY})`,\n          opacity: 0.15,\n        },\n      ],\n      {\n        duration: 600,\n        easing: \"cubic-bezier(0.4, 0, 0.2, 1)\",\n        fill: \"forwards\",\n      },\n    )\n    return true\n  }\n\n  const handleClose = () => {\n    // è§¦å‘å…³é—­åŠ¨ç”»\n    setIsClosing(true)\n    playReturnAnimation()\n    // ç­‰å¾…åŠ¨ç”»å®ŒæˆåçœŸæ­£å…³é—­\n    setTimeout(() => {\n      setIsClosing(false)\n      onClose()\n    }, 600) // åŠ¨ç”»æ—¶é•¿\n  }\n\n  const handleStartReading = () => {\n    if (onStartReading) {\n      onStartReading(book)\n    }\n    handleClose()\n  }\n\n  return (\n    <div\n      className={`fixed inset-0 z-[150] flex items-center justify-center bg-[rgba(255,255,255,0.85)] backdrop-blur-[10px] transition-opacity duration-300 ${\n        isClosing ? \"opacity-0\" : \"opacity-100\"\n      }`}\n    >\n      <div className=\"relative w-full px-6 max-w-md flex flex-col items-center\">\n        {/* å…³é—­æŒ‰é’® */}\n        <button\n          type=\"button\"\n          onClick={handleClose}\n          aria-label=\"å…³é—­å›¾ä¹¦è¯¦æƒ…\"\n          className={`absolute left-0 top-[-72px] ml-6 w-9 h-9 rounded-full bg-white/80 text-[#5D4037] shadow-[0_4px_10px_rgba(0,0,0,0.2)] flex items-center justify-center border border-white/80 transition-opacity duration-300 ${\n            isClosing ? \"opacity-0\" : \"opacity-100\"\n          }`}\n        >\n          <X className=\"w-5 h-5\" />\n        </button>\n\n        {/* å¤ç”¨é¦–é¡µã€Œåªæœ‰ä¸€å¼ å¡ç‰‡ã€çš„ Polaroid æ ·å¼ */}\n        <div\n          ref={cardRef}\n          className={`\n            group polaroid-card relative bg-white rounded-[18px] p-2.5 pb-10\n            shadow-[0_2px_5px_rgba(141,110,99,0.08),_0_14px_32px_rgba(141,110,99,0.25)]\n            transition-transform duration-300\n            w-[280px]\n            ${isClosing ? \"\" : \"animate-pop-in\"}\n          `}\n        >\n          {/* Washi Tape */}\n          <div\n            className={`\n              absolute top-[-12px] left-1/2 w-[50px] h-4\n              opacity-85 mix-blend-multiply\n              shadow-[0_2px_2px_rgba(0,0,0,0.1)]\n              tape-mask\n              ${\n                book.tape === \"yellow\"\n                  ? \"bg-[#FFEB3B] -translate-x-1/2 rotate-[-2deg]\"\n                  : book.tape === \"cyan\"\n                    ? \"bg-[#4DD0E1] -translate-x-1/2 rotate-[3deg]\"\n                    : book.tape === \"pink\"\n                      ? \"bg-[#F48FB1] -translate-x-1/2 rotate-[-4deg]\"\n                      : \"bg-[#A5D6A7] -translate-x-1/2 rotate-[1deg]\"\n              }\n            `}\n          />\n\n          {/* Image Container */}\n          <div className=\"relative w-full aspect-[1/1.05] bg-[#F5F5F5] rounded-xl overflow-hidden border border-black/[0.03] mb-8\">\n            <img\n              src={book.image || \"/placeholder.svg\"}\n              alt={book.title}\n              className=\"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110\"\n            />\n            <div className=\"absolute inset-0 opacity-30 pointer-events-none mix-blend-overlay film-grain\" />\n\n            {/* Status Pill Tag */}\n            {book.status && (\n              <div className=\"absolute top-2 right-2 bg-white/95 px-2.5 py-1 rounded-xl text-[0.65rem] font-black text-[#4E342E] shadow-[0_2px_5px_rgba(0,0,0,0.1)] flex items-center gap-1\">\n                {book.status === \"reading\" && (\n                  <>\n                    <div className=\"w-1.5 h-1.5 rounded-full bg-[#FF9100] shadow-[0_0_5px_#FF9100]\" />\n                    <span>é˜…è¯»ä¸­</span>\n                  </>\n                )}\n                {book.status === \"new\" && <span className=\"text-[#00C853]\">âœ¨ NEW</span>}\n                {book.status === \"completed\" && (\n                  <>\n                    <div className=\"w-1.5 h-1.5 rounded-full bg-[#00E676]\" />\n                    <span>å®Œç»“</span>\n                  </>\n                )}\n              </div>\n            )}\n          </div>\n\n          {/* Handwritten Note */}\n          <div className=\"absolute bottom-2.5 left-0 w-full text-center px-2\">\n            <div className=\"font-nunito font-black text-[#4E342E] text-[0.9rem] mb-0.5 leading-tight\">\n              {book.title}\n            </div>\n            {book.author && (\n              <div className=\"font-fredoka text-[0.7rem] text-[#8D6E63] mb-0.5 tracking-wide\">{book.author}</div>\n            )}\n            <div className=\"font-fredoka text-[0.7rem] text-[#9E9E9E] tracking-wide\">{book.date}</div>\n          </div>\n        </div>\n\n        {/* æ“ä½œæŒ‰é’® */}\n        <button\n          onClick={handleStartReading}\n          className={`mt-8 w-[220px] py-3 rounded-[24px] border-none bg-[#26C6DA] text-white font-bold text-sm shadow-[0_4px_0_#0097A7] active:translate-y-0.5 active:shadow-none self-center transition-opacity duration-300 ${\n            isClosing ? \"opacity-0\" : \"opacity-100\"\n          }`}\n        >\n          å¼€å§‹é˜…è¯»\n        </button>\n      </div>\n    </div>\n  )\n}\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2258, "column": 0}, "map": {"version":3,"sources":["file:///Users/wildmaker/Documents/Projects/boboRead-demo/app/page.tsx"],"sourcesContent":["\"use client\"\n\nimport { useEffect, useState } from \"react\"\nimport { HomeScreen, type Book } from \"@/components/home-screen\"\nimport { CameraScreen } from \"@/components/camera-screen\"\nimport { OnboardingGuide } from \"@/components/onboarding-guide\"\nimport { FtuxIntro } from \"@/components/ftux-intro\"\nimport { BookDetailModal, type CardRect } from \"@/components/book-detail-modal\"\n\nexport default function Page() {\n  const [activeScreen, setActiveScreen] = useState<\"home\" | \"camera\">(\"home\")\n  const [bookCount, setBookCount] = useState<1 | 7>(1)\n  const [showOnboarding, setShowOnboarding] = useState(false)\n  const [showFtux, setShowFtux] = useState(false)\n  const [selectedBook, setSelectedBook] = useState<Book | null>(null)\n  const [selectedCardRect, setSelectedCardRect] = useState<CardRect | null>(null)\n  const [showBookDetail, setShowBookDetail] = useState(false)\n  const [onboardingSource, setOnboardingSource] = useState<\"startReading\" | \"addBook\" | null>(null)\n  const [pendingReadingBook, setPendingReadingBook] = useState<Book | null>(null)\n\n  // é¦–æ¬¡è¿›å…¥ App æ—¶å±•ç¤º FTUX æµç¨‹\n  useEffect(() => {\n    try {\n      if (typeof window === \"undefined\") return\n      const hasSeenFtux = localStorage.getItem(\"hasSeenFtux\")\n      if (!hasSeenFtux) {\n        setShowFtux(true)\n      }\n    } catch {\n      // å¿½ç•¥æœ¬åœ°å­˜å‚¨å¼‚å¸¸\n    }\n  }, [])\n\n  const handleAddNewBook = () => {\n    // ç‚¹å‡»\"æ·»åŠ æ–°ä¹¦\"æ—¶ï¼Œä¸å†å±•ç¤ºæ–°æ‰‹å¼•å¯¼ï¼Œç›´æ¥è¿›å…¥æ‘„åƒå¤´ç•Œé¢\n    setActiveScreen(\"camera\")\n  }\n\n  const handleOnboardingComplete = () => {\n    setShowOnboarding(false)\n    \n    // æ ¹æ®å¼•å¯¼æ¥æºå†³å®šåç»­æ“ä½œ\n    if (onboardingSource === \"startReading\" && pendingReadingBook) {\n      // é€šè¿‡\"å¼€å§‹é˜…è¯»\"è§¦å‘çš„å¼•å¯¼ï¼šå®Œæˆå¼•å¯¼åå¼€å§‹é˜…è¯»\n      // å…³é—­å›¾ä¹¦è¯¦æƒ…å¼¹çª—\n      setShowBookDetail(false)\n      console.log(\"å¼€å§‹é˜…è¯»:\", pendingReadingBook.title)\n      // TODO: å®ç°å¼€å§‹é˜…è¯»é€»è¾‘ï¼ˆä¾‹å¦‚è·³è½¬åˆ°é˜…è¯»é¡µé¢ï¼‰\n      setPendingReadingBook(null)\n    } else {\n      // é€šè¿‡\"æ·»åŠ æ–°ä¹¦\"è§¦å‘çš„å¼•å¯¼ï¼šå®Œæˆå¼•å¯¼åè¿›å…¥æ‘„åƒå¤´ç•Œé¢\n      setActiveScreen(\"camera\")\n    }\n    \n    setOnboardingSource(null)\n  }\n\n  const rectFromDom = (bookId: number): CardRect | null => {\n    if (typeof document === \"undefined\") return null\n    const el = document.querySelector<HTMLElement>(`[data-book-id=\"${bookId}\"]`)\n    if (!el) return null\n    const rect = el.getBoundingClientRect()\n    return {\n      top: rect.top,\n      left: rect.left,\n      width: rect.width,\n      height: rect.height,\n    }\n  }\n\n  const handleScanSuccess = () => {\n    // æ‰«ææˆåŠŸåï¼šå›åˆ°é¦–é¡µã€å¢åŠ ä¹¦æœ¬æ•°é‡ã€å¼¹å‡ºæ–°ä¹¦å¡ç‰‡\n    setActiveScreen(\"home\")\n    setBookCount(7)\n    // æ˜¾ç¤ºåˆšæ‰«æçš„ä¹¦ï¼ˆæ³•è€ç‹çš„å®è—ï¼‰\n    const newBook: Book = {\n      id: 1,\n      title: \"æ³•è€ç‹çš„å®è—\",\n      author: \"ç«¥è¯å”å”\",\n      image: \"/egyptian-pharaoh-treasure-ancient-egypt.jpg\",\n      date: \"åˆšåˆšæ·»åŠ åˆ°å›¾ä¹¦é¦†\",\n      status: \"new\",\n      tape: \"yellow\",\n    }\n    setSelectedBook(newBook)\n    // ç­‰å¾…é¦–é¡µ DOM æ›´æ–°åå†æµ‹é‡ä½ç½®\n    requestAnimationFrame(() => {\n      const rect = rectFromDom(newBook.id)\n      if (rect) {\n        setSelectedCardRect(rect)\n      }\n    })\n    setShowBookDetail(true)\n  }\n\n  const handleBookClick = (book: Book, cardRect: DOMRect) => {\n    setSelectedBook(book)\n    setSelectedCardRect({\n      top: cardRect.top,\n      left: cardRect.left,\n      width: cardRect.width,\n      height: cardRect.height,\n    })\n    setShowBookDetail(true)\n  }\n\n  const handleCloseBookDetail = () => {\n    setShowBookDetail(false)\n    // å»¶è¿Ÿæ¸…ç©ºé€‰ä¸­çš„ä¹¦ï¼Œç­‰åŠ¨ç”»å®Œæˆ\n    setTimeout(() => {\n      setSelectedBook(null)\n      setSelectedCardRect(null)\n    }, 600)\n  }\n\n  const handleStartReading = (book: Book) => {\n    // æ£€æŸ¥ç”¨æˆ·æ˜¯å¦é¦–æ¬¡ç‚¹å‡»\"å¼€å§‹é˜…è¯»\"\n    try {\n      if (typeof window !== \"undefined\") {\n        const hasStartedReading = localStorage.getItem(\"hasStartedReading\")\n        const hasSeenOnboarding = localStorage.getItem(\"hasSeenOnboarding\")\n        \n        if (!hasStartedReading && !hasSeenOnboarding) {\n          // é¦–æ¬¡ç‚¹å‡»\"å¼€å§‹é˜…è¯»\"ï¼šå±•ç¤ºæ–°æ‰‹å¼•å¯¼æµç¨‹\n          localStorage.setItem(\"hasStartedReading\", \"true\")\n          setPendingReadingBook(book)\n          setOnboardingSource(\"startReading\")\n          setShowOnboarding(true)\n        } else {\n          // å·²çœ‹è¿‡å¼•å¯¼æˆ–å·²å¼€å§‹é˜…è¯»è¿‡ï¼šç›´æ¥å¼€å§‹é˜…è¯»\n          console.log(\"å¼€å§‹é˜…è¯»:\", book.title)\n          // TODO: å®ç°å¼€å§‹é˜…è¯»é€»è¾‘ï¼ˆä¾‹å¦‚è·³è½¬åˆ°é˜…è¯»é¡µé¢ï¼‰\n        }\n      }\n    } catch {\n      // å¿½ç•¥æœ¬åœ°å­˜å‚¨å¼‚å¸¸\n      console.log(\"å¼€å§‹é˜…è¯»:\", book.title)\n    }\n  }\n\n  return (\n    <div className=\"h-screen w-full overflow-hidden relative\">\n      <HomeScreen\n        isActive={activeScreen === \"home\"}\n        onStartReading={handleAddNewBook}\n        onBookClick={handleBookClick}\n        bookCount={bookCount}\n      />\n      <CameraScreen\n        isActive={activeScreen === \"camera\"}\n        onBack={() => setActiveScreen(\"home\")}\n        onRead={() => {}}\n        onScanSuccess={handleScanSuccess}\n      />\n\n      {/* å›¾ä¹¦è¯¦æƒ…å¼¹çª—ï¼ˆé€šç”¨ï¼‰ */}\n      <BookDetailModal\n        book={selectedBook}\n        isOpen={showBookDetail && activeScreen === \"home\"}\n        onClose={handleCloseBookDetail}\n        onStartReading={handleStartReading}\n        targetRect={selectedCardRect}\n      />\n\n      {showOnboarding && <OnboardingGuide onComplete={handleOnboardingComplete} />}\n\n      {showFtux && <FtuxIntro onFinish={() => setShowFtux(false)} />}\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}